var y=Object.defineProperty;var B=Math.pow,S=(i,t,s)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var g=(i,t,s)=>(S(i,typeof t!="symbol"?t+"":t,s),s);import{f as C,y as N,A as x,Y as T,a1 as h,Z as O,ap as D,o as m,n as E,g as k,w as A,h as p,b,aq as R,j as _,p as w,t as j}from"./vendor.0a64e0b0.js";import{_ as H}from"./CopyText.41ab5170.js";import{u as F,l as $}from"./index.cfd81eac.js";/* empty css              *//* empty css               */class v{constructor(t){g(this,"ip");g(this,"cidr");g(this,"netmask");g(this,"netmaskLength");t&&this.setCidr(t)}static validate(t){return RegExp(/^(?:(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([1-9]|[1-2]\d|3[0-2])$/).test(t)}setCidr(t){return this.cidr=t,this.ip=t.substring(0,t.indexOf("/")),this.netmaskLength=parseInt(t.substring(t.indexOf("/")+1)),this.netmask=this.maskLengthToMask(this.netmaskLength),this}maskLengthToMask(t){const s=n=>{let a="";for(let o=0;o<32-n;o++)a=String(a)+String(0);return a},e="1".repeat(t)+s(t);return String(parseInt(e.substring(0,8),2))+"."+String(parseInt(e.substring(8,16),2))+"."+String(parseInt(e.substring(16,24),2))+"."+String(parseInt(e.substring(24,32),2))}splitAddress(t){let s=[];return s=t.split("."),s}convertedToBinary(t){return(parseInt(t)+256).toString(2).substring(1)}convertedToBinaryArr(t){for(let s=0;s<t.length;s++)t[s]=this.convertedToBinary(t[s]);return t}arrJoinToString(t){let s="";return s=t.join(""),s}getHostIndexOfNetmask(t){return t.indexOf("0")}andOperation(t,s){return parseInt(t)&parseInt(s)}getNetworkArr(t,s){const r=[];for(let e=0;e<4;e++)r[e]=this.andOperation(t[e],s[e]);return r}formatAddress(t){let s="";return s=t.join("."),s}getBroadcastBinaryString(t,s){let r="";const e=t.substring(0,s);let n=t.substring(s,t.length);return n=n.replace(/\d/g,"1"),r=e+n,r}getBroadcastBinaryArr(t){const s=8,r=new Array(4);for(let e=0;e<4;e++)r[e]=t.substr(e*s,s);return r}formatBroadcast(t){for(let s=0;s<t.length;s++)t[s]=parseInt(t[s],2);return this.formatAddress(t)}getIpAddress(){return this.ip}getNetmask(){return this.netmask}getNetwork(){const t=this.getIpAddress(),s=this.getNetmask(),r=this.splitAddress(t),e=this.splitAddress(s),n=this.getNetworkArr(r,e);return this.formatAddress(n)}getBroadcast(){const t=this.getNetmask(),s=this.splitAddress(t),r=this.convertedToBinaryArr(s),e=this.arrJoinToString(r),n=this.getHostIndexOfNetmask(e),a=this.getNetwork(),o=this.splitAddress(a),u=this.convertedToBinaryArr(o),d=this.arrJoinToString(u),l=this.getBroadcastBinaryString(d,n),c=this.getBroadcastBinaryArr(l);return this.formatBroadcast(c)}getAddressRangeStart(){const t=this.getNetwork(),s=this.splitAddress(t);return s[3]=(parseInt(s[3])+1).toString(),this.formatAddress(s)}getAddressRangeLast(){const t=this.getBroadcast(),s=this.splitAddress(t);return s[3]=(parseInt(s[3])-1).toString(),this.formatAddress(s)}calculate(){try{const t=B(2,32-this.netmaskLength)-2,s=this.getNetwork(),r=this.getBroadcast(),e=this.getAddressRangeStart(),n=this.getAddressRangeLast();return{network:s,broadcast:r,firstHost:e,lastHost:n,availableHosts:t}}catch(t){return null}}}const L=w("h3",{class:"mt-2"},"\u8BF7\u8F93\u5165 CIDR",-1),Y=C({setup(i){const{t}=N();F().setTitle("CIDR \u8BA1\u7B97\u5668"),x({title:`CIDR \u8BA1\u7B97\u5668 - ${t("app_name")}`});const s=new v,r=T(""),e=h(()=>v.validate(r.value)),n=h(()=>!r.value.length||!e.value?null:s.setCidr(r.value).calculate()),a=h(()=>{var o,u,d,l,c;return n?[`\u53EF\u7528\u5730\u5740: ${(o=n.value)==null?void 0:o.availableHosts}`,`\u8D77\u59CB\u5730\u5740: ${(u=n.value)==null?void 0:u.firstHost}`,`\u7ED3\u675F\u5730\u5740: ${(d=n.value)==null?void 0:d.lastHost}`,`\u7F51\u7EDC\u5730\u5740: ${(l=n.value)==null?void 0:l.network}`,`\u5E7F\u64AD\u5730\u5740: ${(c=n.value)==null?void 0:c.broadcast}`].join(`
`):""});return(o,u)=>{const d=O,l=D,c=$,f=H;return m(),E("div",null,[k(c,{class:"container-content-section !pb-8 !<sm:pb-2"},{default:A(()=>[L,k(d,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=I=>r.value=I),placeholder:"192.68.0.1/24"},null,8,["modelValue"]),!p(e)&&r.value.length?(m(),b(l,{key:0,type:"error",title:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684 CIDR",closable:!1,"show-icon":"",class:"!mt-4"})):_("",!0)]),_:1}),p(n)?(m(),b(c,{key:0,class:"container-content-section with-title",title:"\u89E3\u6790\u7ED3\u679C",icon:p(R)},{default:A(()=>[k(f,{text:p(a)},{default:A(()=>[w("div",null,j(p(a)),1)]),_:1},8,["text"])]),_:1},8,["icon"])):_("",!0)])}}});export{Y as default};
