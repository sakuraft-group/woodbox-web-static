var D=(B,F,r)=>new Promise((E,o)=>{var i=a=>{try{u(r.next(a))}catch(p){o(p)}},d=a=>{try{u(r.throw(a))}catch(p){o(p)}},u=a=>a.done?E(a.value):Promise.resolve(a.value).then(i,d);u((r=r.apply(B,F)).next())});import{f as A,y as I,A as R,Y as f,Z as x,au as S,av as U,aw as V,o as g,n as y,g as v,w,b as k,j as b,h as G,Q as N,ax as O,p as _,t as P,N as $,O as q,aa as C}from"./vendor.303085b1.js";/* empty css                 *//* empty css                     */import{u as T,l as z}from"./index.9ec19e2e.js";/* empty css              */const H={class:"page-tool-gif-splitter"},Q={key:0,class:"mt-8"},W={class:"grid grid-cols-4 <md:grid-cols-3 <sm:grid-cols-2 gap-4 <md:gap-2"},Y=_("div",{class:"list-document"},[_("p",null," \u751F\u6210\u540E\u53EF\u901A\u8FC7\u70B9\u51FB\u56FE\u7247\u6216\u957F\u6309\u8FDB\u884C\u4E0B\u8F7D\u4FDD\u5B58 "),_("p",null,"\u63A8\u8350\u4F7F\u7528 Chrome / Edge / Firefox \u6D4F\u89C8\u5668")],-1),se=A({setup(B){const{t:F}=I();T().setTitle("GIF \u5206\u89E3"),R({title:`GIF \u5206\u89E3 - ${F("app_name")}`,script:[{src:"/static/scripts/libgif.js",defer:!0,async:!0}]});const r=window.URL||window.webkitURL,E=()=>Reflect.has(window,"SuperGif"),o=f(!1),i=f(null),d=f(0),u=f([]),a=()=>{if(!!i.value&&(i.value.endsWith(".gif")||C.warning("\u8BF7\u4E0A\u4F20 GIF \u56FE\u7247"),!E())){C.warning("\u8BF7\u7B49\u5F85\u73AF\u5883\u51C6\u5907\u5B8C\u6210");return}},p=()=>{var c,l;const t=(l=(c=document.querySelector("input[type=file]"))==null?void 0:c.files)==null?void 0:l[0],e=new FileReader;return new Promise((s,h)=>{e.addEventListener("load",()=>{const n=new Image;n.src=e.result,n.setAttribute("rel:animated_src",r.createObjectURL(t)),n.setAttribute("rel:auto_play","false"),n.style.display="none",document.body.appendChild(n),n.addEventListener("load",()=>{s(n)})}),e.addEventListener("error",()=>{h(e.error)}),e.readAsDataURL(t)})},L=()=>D(this,null,function*(){if(!!i.value)try{o.value=!0,d.value=0;const t=yield p(),e=new SuperGif({gif:t,auto_play:!1});yield new Promise(c=>{e.load(()=>{const l=[];for(let s=1;s<=e.get_length();s++)e.move_to(s),d.value=s/e.get_length()*100,l.push(e.get_canvas().toDataURL());u.value=l,c("")})})}catch(t){C.error({title:"\u5206\u89E3\u5931\u8D25",message:t.message})}finally{document.querySelectorAll(".jsgif").forEach(t=>{t.remove()}),setTimeout(()=>{o.value=!1},500)}}),j=t=>{const e=document.createElement("a");e.href=t,e.download="image.png",e.click()};return(t,e)=>{const c=x,l=S,s=z,h=U,n=V;return g(),y("div",H,[v(s,{class:"container-content-section with-title"},{default:w(()=>[O(v(c,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=m=>i.value=m),type:"file",class:"mt-2",accept:"image/gif",onChange:a},{append:w(()=>[_("span",{class:"cursor-pointer",onClick:L},P("\u5206\u89E3"))]),_:1},8,["modelValue"]),[[n,o.value]]),o.value?(g(),y("div",Q,[v(l,{"text-inside":!0,"stroke-width":16,percentage:d.value,status:"success"},null,8,["percentage"])])):b("",!0)]),_:1}),u.value.length&&!o.value?(g(),k(s,{key:0,title:"\u5206\u89E3\u7ED3\u679C",class:"container-content-section with-title"},{default:w(()=>[_("div",W,[(g(!0),y($,null,q(u.value,m=>(g(),k(h,{key:m,src:m,lazy:"",onClick:Z=>j(m)},null,8,["src","onClick"]))),128))])]),_:1})):b("",!0),v(s,{icon:G(N),title:t.$t("title.document"),class:"container-content-section with-title"},{default:w(()=>[Y]),_:1},8,["icon","title"])])}}});export{se as default};
