var D=(B,w,r)=>new Promise((E,o)=>{var u=a=>{try{i(r.next(a))}catch(d){o(d)}},c=a=>{try{i(r.throw(a))}catch(d){o(d)}},i=a=>a.done?E(a.value):Promise.resolve(a.value).then(u,c);i((r=r.apply(B,w)).next())});import{f as I,y as j,A as R,Y as f,Z as x,au as S,av as U,aw as V,o as g,n as y,g as v,w as F,b as k,j as L,h as G,Q as N,ax as O,p as _,t as $,N as q,O as P,aa as C}from"./vendor.0a64e0b0.js";/* empty css                 */import{u as T,l as z}from"./index.98f0f520.js";/* empty css              */const H={class:"page-tool-gif-splitter"},Q={key:0,class:"mt-8"},W={class:"grid grid-cols-4 <md:grid-cols-3 <sm:grid-cols-2 gap-4 <md:gap-2"},Y=_("div",{class:"list-document"},[_("p",null," \u751F\u6210\u540E\u53EF\u901A\u8FC7\u70B9\u51FB\u56FE\u7247\u6216\u957F\u6309\u8FDB\u884C\u4E0B\u8F7D\u4FDD\u5B58 "),_("p",null,"\u63A8\u8350\u4F7F\u7528 Chrome / Edge / Firefox \u6D4F\u89C8\u5668")],-1),te=I({setup(B){const{t:w}=j();T().setTitle("GIF \u5206\u89E3"),R({title:`GIF \u5206\u89E3 - ${w("app_name")}`,script:[{src:"/static/scripts/libgif.js",defer:!0,async:!0}]});const r=window.URL||window.webkitURL,E=()=>Reflect.has(window,"SuperGif"),o=f(!1),u=f(null),c=f(0),i=f([]),a=()=>{if(!!u.value&&(u.value.endsWith(".gif")||C.warning("\u8BF7\u4E0A\u4F20 GIF \u56FE\u7247"),!E())){C.warning("\u8BF7\u7B49\u5F85\u73AF\u5883\u51C6\u5907\u5B8C\u6210");return}},d=()=>{var l,s;const t=(s=(l=document.querySelector("input[type=file]"))==null?void 0:l.files)==null?void 0:s[0],e=new FileReader;return new Promise((p,h)=>{e.addEventListener("load",()=>{const n=new Image;n.src=e.result,n.setAttribute("rel:animated_src",r.createObjectURL(t)),n.setAttribute("rel:auto_play","false"),n.style.display="none",document.body.appendChild(n),n.addEventListener("load",()=>{p(n)})}),e.addEventListener("error",()=>{h(e.error)}),e.readAsDataURL(t)})},b=()=>D(this,null,function*(){if(!!u.value)try{o.value=!0,c.value=0;const t=yield d(),e=new SuperGif({gif:t,auto_play:!1});e.load(()=>{const l=[];for(let s=1;s<=e.get_length();s++)e.move_to(s),c.value=s/e.get_length()*100,l.push(e.get_canvas().toDataURL());i.value=l})}catch(t){C.error({title:"\u5206\u89E3\u5931\u8D25",message:t.message})}finally{document.querySelectorAll(".jsgif").forEach(t=>{t.remove()}),setTimeout(()=>{o.value=!1},500)}}),A=t=>{const e=document.createElement("a");e.href=t,e.download="image.png",e.click()};return(t,e)=>{const l=x,s=S,p=z,h=U,n=V;return g(),y("div",H,[v(p,{class:"container-content-section with-title"},{default:F(()=>[O(v(l,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),type:"file",class:"mt-2",accept:"image/gif",onChange:a},{append:F(()=>[_("span",{class:"cursor-pointer",onClick:b},$("\u5206\u89E3"))]),_:1},8,["modelValue"]),[[n,o.value]]),o.value?(g(),y("div",Q,[v(s,{"text-inside":!0,"stroke-width":16,percentage:c.value,status:"success"},null,8,["percentage"])])):L("",!0)]),_:1}),i.value.length&&!o.value?(g(),k(p,{key:0,title:"\u5206\u89E3\u7ED3\u679C",class:"container-content-section with-title"},{default:F(()=>[_("div",W,[(g(!0),y(q,null,P(i.value,m=>(g(),k(h,{key:m,src:m,lazy:"",onClick:Z=>A(m)},null,8,["src","onClick"]))),128))])]),_:1})):L("",!0),v(p,{icon:G(N),title:t.$t("title.document"),class:"container-content-section with-title"},{default:F(()=>[Y]),_:1},8,["icon","title"])])}}});export{te as default};
